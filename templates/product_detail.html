{% extends 'base.html' %}
{% load static %}


{% block stylesheet %}

{% endblock %}

{% block content %}
    <!-- BEGIN: CONTENT/SHOPS/SHOP-PRODUCT-DETAILS-2 -->
    <div class="c-content-box c-size-lg c-overflow-hide ">
        <div class="container">
            <div class="c-shop-product-details-2">
                <div class="row">
                    <div class="col-md-6">
                        <div class="c-product-gallery">
                            <div class="c-product-gallery-content">
                                {% for pmedia in pmedia %}
                                    <div class="c-zoom">
                                        <img src="{{ pmedia.img_product.url }}">
                                    </div>
                                {% endfor %}

                            </div>
                            <div class="row c-product-gallery-thumbnail">
                                {% for pmedia in pmedia %}
                                    <div class="col-xs-3 c-product-thumb">
                                        <img src="{{ MEDIA_URL }}{{ pmedia.img }}">
                                    </div>
                                {% endfor %}

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="c-product-meta">
                            <div class="c-content-title-1">
                                <h3 class="c-font-uppercase c-font-bold  font-fa">{{ product.name }}</h3>
                                <div class="c-line-left"></div>
                            </div>
                            <div class="c-product-badge">
                                <div class="c-product-sale font-fa">فروش</div>
                                <div class="c-product-new font-fa">جدید</div>
                            </div>
                            <div class="c-product-review">
                                <div class="c-product-rating">
                                    <i class="fa fa-star c-font-red"></i>
                                    <i class="fa fa-star c-font-red"></i>
                                    <i class="fa fa-star c-font-red"></i>
                                    <i class="fa fa-star c-font-red"></i>
                                    <i class="fa fa-star-half-o c-font-red"></i>
                                </div>
                                <div class="c-product-write-review">
                                    <a class="c-font-red font-fa" href="#">نوشتن نظر</a>
                                </div>
                            </div>
                            <div class="c-product-price">{{ product.productprice_set.first.price }}</div>
                            <div class="c-product-short-desc font-fa">
                                {{ product.description }}
                            </div>
                            <div class="c-product-add-cart c-margin-t-20">
                                <div class="row">
                                    <div class="col-sm-12 col-xs-12 c-margin-t-20">
                                        <button class="btn c-btn btn-lg c-font-bold c-font-white c-theme-btn c-font-uppercase font-fa">
                                            سفارش
                                        </button>
                                        <button id="favorite" type="button" class="btn c-btn btn-lg c-font-bold c-font-white c-theme-btn c-font-uppercase font-fa" style="padding: 2px 10px;">
                                            <span class="fa {% if product.favorite.count != 0 %}fa-heart{% else %}fa-heart-o{% endif %} " style="font-size: 30px;padding: 0px;"></span>
                                        </button>
                                        <button class="btn c-btn btn-lg c-font-bold c-font-white c-theme-btn c-font-uppercase font-fa">
                                            مقایسه
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="c-shop-product-tab-1" role="tabpanel">
        <div class="container font-fa">
            <ul class="nav nav-justified" role="tablist">
                <li role="presentation" class="active">
                    <a class="c-font-uppercase c-font-bold" href="#tab-1" role="tab"
                       data-toggle="tab">مشخصات کالا</a>
                </li>
                <li role="presentation">
                    <a class="c-font-uppercase c-font-bold" href="#tab-2" role="tab" data-toggle="tab">نمایندگان</a>
                </li>
            </ul>
        </div>
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade in active" id="tab-1">
                <div class="container">
                    <div class="row">
                        <div class="c-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table font-fa">
                                        <tbody>
                                        {% for pf in product_field %}

                                            <tr{% if forloop.counter|divisibleby:2 %} class="active" {% endif %}>
                                                <td>{{ pf.field.name }}</td>
                                                {% if pf.field.type_choice == 'char' %}
                                                    <td>{{ pf.char_field }}</td>
                                                {% endif %}
                                                {% if pf.field.type_choice == 'txt' %}
                                                    <td>{{ pf.text_field }}</td>
                                                {% endif %}
                                                {% if pf.field.type_choice == 'int' %}
                                                    <td>{{ pf.int_field }}</td>
                                                {% endif %}
                                                {% if pf.field.type_choice == 'flo' %}
                                                    <td>{{ pf.float_field }}</td>
                                                {% endif %}
                                            </tr>
                                        {% endfor %}

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div role="tabpanel" class="tab-pane fade" id="tab-2">
                <div class="container">
                    <div class="row">
                        <div class="c-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table font-fa">
                                        <thead>
                                        <tr>
                                            <td>نام فروشگاه</td>
                                            <td>قیمت پایه</td>
                                            <td>مالیات</td>
                                            <td>تخفیف</td>
                                            <td>مالیات اعمال شده بر روی قیمت</td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>سامسونگ</td>
                                            <td>150000</td>
                                            <td>10%</td>
                                            <td>5%</td>
                                            <td>100000</td>
                                        </tr>
                                        <tr class="active">
                                            <td>سامسونگ</td>
                                            <td>150000</td>
                                            <td>10%</td>
                                            <td>5%</td>
                                            <td>100000</td>
                                        </tr>
                                        <tr>
                                            <td>سامسونگ</td>
                                            <td>150000</td>
                                            <td>10%</td>
                                            <td>5%</td>
                                            <td>100000</td>
                                        </tr>
                                        <tr class="active">
                                            <td>سامسونگ</td>
                                            <td>150000</td>
                                            <td>10%</td>
                                            <td>5%</td>
                                            <td>100000</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END: CONTENT/SHOPS/SHOP-PRODUCT-DETAILS-2 -->
    </div>
    <div class="c-content-box c-size-md c-overflow-hide c-bs-grid-small-space c-bg-grey-1">
        <div class="container">
            <div class="c-content-title-4">
                <h3 class="c-font-uppercase c-center c-font-bold c-line-strike"><span
                        class="c-bg-grey-1 font-fa">محصولات اخیر</span>
                </h3>
            </div>
            <div class="row">
                {% for ap in all_product %}
                    <div class="col-md-3 col-sm-6 c-margin-b-20">
                    <div class="c-content-product-2 c-bg-white">
                        <div class="c-content-overlay">
                            <div class="c-overlay-wrapper">
                                <div class="c-overlay-content">
                                    <a href="{% url 'product:product_detail' pk=ap.id %}"
                                       class="btn btn-md c-btn-grey-1 c-btn-uppercase c-btn-bold c-btn-border-1x c-btn-square">Explore</a>
                                </div>
                            </div>
                            <div class="c-bg-img-center c-overlay-object" data-height="height"
                                 style="height: 270px; background-image: url({{ MEDIA_URL }}{{ ap.productmedia_set.first.img }});"></div>
                        </div>
                        <div class="c-info">
                            <p class="c-title c-font-18 c-font-slim">{{ ap.name }}</p>
                            <p class="c-price c-font-16 c-font-slim">{{ ap.productprice_set.first.price }}
                                <span class="c-font-16 c-font-line-through c-font-red">{{ ap.productprice_set.first.price }}</span>
                            </p>
                        </div>
                        <div class="btn-group btn-group-justified" role="group">
                            <div class="btn-group c-border-top" role="group">
                                <a href=""
                                   class="btn btn-lg c-btn-white c-btn-uppercase c-btn-square c-font-grey-3 c-font-white-hover c-bg-red-2-hover c-btn-product">سفارش</a>
                            </div>
                            <div class="btn-group c-border-left c-border-top" role="group">
                                <a href=""
                                   class="btn btn-lg c-btn-white c-btn-uppercase c-btn-square c-font-grey-3 c-font-white-hover c-bg-red-2-hover c-btn-product">علاقه
                                    مندی</a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'assets/plugins/zoom-master/jquery.zoom.min.js' %}" type="text/javascript"></script>
    <script>
        $('#favorite').click(function () {
            $.ajax({
                url : '{% url 'product:favorite' %}',
                type: 'POST',
                data:{
                    'pk':'{{ product.id }}'
                },
                success:function (data) {
                    alert(data.message);
                }
            });
        })
    </script>
{% endblock %}